@startuml Use Case Diagram - Retail CP3

!theme plain
skinparam usecaseStyle rectangle
skinparam actorStyle awesome
skinparam dpi 120
skinparam usecaseBackgroundColor #E3F2FD
skinparam usecaseBorderColor #1976D2
skinparam actorBackgroundColor #FFEBEE
skinparam actorBorderColor #D32F2F
skinparam packageBackgroundColor #F5E8FF
skinparam packageBorderColor #8E44AD
skinparam noteBackgroundColor #FFF3CD
skinparam noteBorderColor #856404

left to right direction

actor Customer
actor "Store Admin" as Admin
actor "Partner / VAR" as Partner
actor "Payment Gateway" as PaymentService

rectangle "Storefront" {
    usecase "Browse Catalog" as UC_Browse
    usecase "Manage Shopping Cart" as UC_Cart
    usecase "Checkout Order" as UC_Checkout
    usecase "Track Order Status" as UC_OrderStatus
}

rectangle "Returns & Refunds" {
    usecase "Submit Return Request" as UC_ReturnRequest
    usecase "Upload Return Photos" as UC_ReturnPhotos
    usecase "Track RMA Status" as UC_ReturnTrack
    usecase "Review Request" as UC_ReviewReturn
    usecase "Authorize / Reject RMA" as UC_Authorize
    usecase "Record Inspection" as UC_Inspection
    usecase "Trigger Refund / Replacement" as UC_Refund
}

rectangle "Admin & Observability" {
    usecase "Manage Catalog & Users" as UC_AdminManage
    usecase "View Admin Dashboard" as UC_Dashboard
    usecase "Monitor Quality Scenarios (A.1 / P.1)" as UC_QualityMonitoring
}

rectangle "Partner Integration" {
    usecase "Sync Partner Catalog" as UC_PartnerSync
    usecase "Validate Partner Feed" as UC_PartnerValidate
}

Customer --> UC_Browse
Customer --> UC_Cart
Customer --> UC_Checkout
Customer --> UC_OrderStatus
Customer --> UC_ReturnRequest
Customer --> UC_ReturnPhotos
Customer --> UC_ReturnTrack

Admin --> UC_ReviewReturn
Admin --> UC_Authorize
Admin --> UC_Inspection
Admin --> UC_Refund
Admin --> UC_AdminManage
Admin --> UC_Dashboard
Admin --> UC_QualityMonitoring

Partner --> UC_PartnerSync
Partner --> UC_PartnerValidate

PaymentService --> UC_Checkout
PaymentService --> UC_Refund

UC_Checkout ..> UC_Cart : <<includes>>
UC_ReturnRequest ..> UC_ReturnPhotos : <<optional>>
UC_Refund ..> UC_Inspection : <<requires>>
UC_Dashboard ..> UC_QualityMonitoring : <<includes>>

note right of UC_Refund
  Refund Execution
  - Card/original method passes through payment gateway
  - Cash / store credit handled manually
  - Partial approvals keep audit notes
end note

note right of UC_QualityMonitoring
  Scenario Evidence
  - A.1 availability (acceptance rate + MTTR)
  - P.1 performance (95th percentile latency)
  - Dashboard consumes live metrics
end note

note right of UC_ReturnRequest
  Returns Workflow
  1. Customer submits RMA with photos
  2. Admin validates eligibility & authorizes
  3. Shipment + inspection captured
  4. Refund or rejection recorded
end note

@enduml
